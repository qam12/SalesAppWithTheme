{"version":3,"file":"agm-direction.directive.js","sourceRoot":"","sources":["../../../src/directive/agm-direction.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, Input, Output, OnChanges, OnInit, EventEmitter } from '@angular/core';\nimport { GoogleMapsAPIWrapper } from '@agm/core';\nimport { InfoWindow, Marker, GoogleMap } from '@agm/core/services/google-maps-types';\n\ndeclare var google: any;\n@Directive({\n  selector: 'agm-direction',\n})\nexport class AgmDirection implements OnChanges, OnInit {\n\n  /**\n   * LatLng | String | google.maps.Place\n   */\n  @Input() origin: any;\n\n  /**\n   * LatLng | String | google.maps.Place\n   */\n  @Input() destination: any;\n\n  @Input() travelMode: String = 'DRIVING';\n  @Input() transitOptions: any = undefined;\n  @Input() drivingOptions: any = undefined;\n  @Input() waypoints: any = [];\n  @Input() optimizeWaypoints: Boolean = true;\n  @Input() provideRouteAlternatives: Boolean = false;\n  @Input() avoidHighways: Boolean = false;\n  @Input() avoidTolls: Boolean = false;\n  @Input() renderOptions: any;\n  @Input() visible: Boolean = true;\n  @Input() panel: object | undefined;\n  @Input() markerOptions: { origin: any, destination: any, waypoints: any };\n  @Input() infoWindow: InfoWindow;\n\n  // Render exist directoin\n  @Input() renderRoute: any;\n\n  // Direction change event handler\n  @Output() onChange: EventEmitter<any> = new EventEmitter<any>();\n\n  // Direction response for the new request\n  @Output() onResponse: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() sendInfoWindow: EventEmitter<InfoWindow> = new EventEmitter<InfoWindow>();\n\n  public directionsService: any = undefined;\n  public directionsDisplay: any = undefined;\n\n  // Use for custom marker\n  private originMarker: any;\n  private destinationMarker: any;\n  private waypointsMarker: any = [];\n\n  // Use for visible flag\n  private isFirstChange: Boolean = true;\n\n  constructor(\n    private gmapsApi: GoogleMapsAPIWrapper,\n  ) { }\n\n  ngOnInit() {\n    if (this.visible === true) {\n      this.directionDraw();\n    }\n  }\n\n  ngOnChanges(obj: any) {\n    /**\n     * When visible is false then remove the direction layer\n     */\n    if (!this.visible) {\n      try {\n        if (typeof this.originMarker !== 'undefined') {\n          this.originMarker.setMap(null);\n          this.destinationMarker.setMap(null);\n          this.waypointsMarker.forEach((w: any) => w.setMap(null));\n        }\n        this.directionsDisplay.setPanel(null);\n        this.directionsDisplay.setMap(null);\n        this.directionsDisplay = undefined;\n      } catch (e) { }\n    } else {\n      if (this.isFirstChange) {\n        /**\n         * When visible is false at the first time\n         */\n        if (typeof this.directionsDisplay === 'undefined') {\n          this.directionDraw();\n        }\n        this.isFirstChange = false;\n        return;\n      }\n\n      /**\n       * When renderOptions are not first change then reset the display\n       */\n      if (typeof obj.renderOptions !== 'undefined') {\n        if (obj.renderOptions.firstChange === false) {\n          if (typeof this.originMarker !== 'undefined') {\n            this.originMarker.setMap(null);\n            this.destinationMarker.setMap(null);\n            this.waypointsMarker.forEach((w: any) => w.setMap(null));\n          }\n          this.directionsDisplay.setPanel(null);\n          this.directionsDisplay.setMap(null);\n          this.directionsDisplay = undefined;\n        }\n      }\n      this.directionDraw();\n    }\n\n  }\n\n  /**\n   * This event is fired when the user creating or updating this direction\n   */\n  private directionDraw() {\n\n    this.gmapsApi.getNativeMap().then((map: GoogleMap) => {\n\n      if (typeof this.directionsDisplay === 'undefined') {\n        this.directionsDisplay = new google.maps.DirectionsRenderer(this.renderOptions);\n        this.directionsDisplay.setMap(map);\n        this.directionsDisplay.addListener('directions_changed', () => {\n          this.onChange.emit(this.directionsDisplay.getDirections());\n        });\n      }\n\n      if (typeof this.directionsService === 'undefined') {\n        this.directionsService = new google.maps.DirectionsService;\n      }\n\n      if (typeof this.panel === 'undefined') {\n        this.directionsDisplay.setPanel(null);\n      } else {\n        this.directionsDisplay.setPanel(this.panel);\n      }\n\n      // Render exist direction\n      if (typeof this.renderRoute === 'object' && this.renderRoute !== null) {\n        this.directionsDisplay.setDirections(this.renderRoute);\n        this.renderRoute = null; // or set undefined, ''\n      } else {\n\n        // Request new direction\n        this.directionsService.route({\n          origin: this.origin,\n          destination: this.destination,\n          travelMode: this.travelMode,\n          transitOptions: this.transitOptions,\n          drivingOptions: this.drivingOptions,\n          waypoints: this.waypoints,\n          optimizeWaypoints: this.optimizeWaypoints,\n          provideRouteAlternatives: this.provideRouteAlternatives,\n          avoidHighways: this.avoidHighways,\n          avoidTolls: this.avoidTolls,\n        }, (response: any, status: any) => {\n\n          this.onResponse.emit(response);\n\n          if (status === 'OK') {\n            this.directionsDisplay.setDirections(response);\n\n            /**\n             * Emit The DirectionsResult Object\n             * https://developers.google.com/maps/documentation/javascript/directions?hl=en#DirectionsResults\n             */\n\n            // Custom Markers\n            if (typeof this.markerOptions !== 'undefined') {\n\n              // Remove origin markers\n              try {\n                if (typeof this.originMarker !== 'undefined') {\n                  google.maps.event.clearListeners(this.originMarker, 'click');\n                  this.originMarker.setMap(null);\n                }\n                if (typeof this.destinationMarker !== 'undefined') {\n                  google.maps.event.clearListeners(this.destinationMarker, 'click');\n                  this.destinationMarker.setMap(null);\n                }\n                this.waypointsMarker.forEach((w: any) => {\n                  if (typeof w !== 'undefined') {\n                    google.maps.event.clearListeners(w, 'click');\n                    w.setMap(null);\n                  }\n                });\n\n              } catch (err) {\n                console.error('Can not reset custom marker.', err);\n              }\n\n              // Set custom markers\n              const _route = response.routes[0].legs[0];\n              try {\n                // Origin Marker\n                if (typeof this.markerOptions.origin !== 'undefined') {\n                  this.markerOptions.origin.map = map;\n                  this.markerOptions.origin.position = _route.start_location;\n                  this.originMarker = this.setMarker(\n                    map,\n                    this.originMarker,\n                    this.markerOptions.origin,\n                    _route.start_address,\n                  );\n                }\n\n                // Destination Marker\n                if (typeof this.markerOptions.destination !== 'undefined') {\n                  this.markerOptions.destination.map = map;\n                  this.markerOptions.destination.position = _route.end_location;\n                  this.destinationMarker = this.setMarker(\n                    map,\n                    this.destinationMarker,\n                    this.markerOptions.destination,\n                    _route.end_address,\n                  );\n                }\n\n                // Waypoints Marker\n                if (typeof this.markerOptions.waypoints !== 'undefined') {\n\n                  this.waypoints.forEach((waypoint: any, index: number) => {\n\n                    // If waypoints are not array then set all the same\n                    if (!Array.isArray(this.markerOptions.waypoints)) {\n                      this.markerOptions.waypoints.map = map;\n                      this.markerOptions.waypoints.position = _route.via_waypoints[index];\n                      this.waypointsMarker.push(this.setMarker(\n                        map,\n                        waypoint,\n                        this.markerOptions.waypoints,\n                        _route.via_waypoints[index],\n                      ));\n                    } else {\n                      this.markerOptions.waypoints[index].map = map;\n                      this.markerOptions.waypoints[index].position = _route.via_waypoints[index];\n                      this.waypointsMarker.push(this.setMarker(\n                        map,\n                        waypoint,\n                        this.markerOptions.waypoints[index],\n                        _route.via_waypoints[index],\n                      ));\n                    }\n\n                  }); // End forEach\n\n                }\n              } catch (err) {\n                console.error('MarkerOptions error.', err);\n              }\n            }\n\n          }\n\n        });\n      }\n    });\n  }\n\n  /**\n   * Custom Origin and Destination Icon\n   * @param map map\n   * @param marker marker\n   * @param markerOpts properties\n   * @param content marker's infowindow content\n   * @returns new marker\n   * @memberof AgmDirection\n   */\n  private setMarker(map: GoogleMap, marker: any, markerOpts: any, content: string) {\n    if (typeof this.infoWindow === 'undefined') {\n      this.infoWindow = new google.maps.InfoWindow({});\n      this.sendInfoWindow.emit(this.infoWindow);\n    }\n    marker = new google.maps.Marker(markerOpts);\n    marker.addListener('click', () => {\n      const infowindoContent: string = typeof markerOpts.infoWindow === 'undefined' ? content : markerOpts.infoWindow;\n      this.infoWindow.setContent(infowindoContent);\n      this.infoWindow.open(map, marker);\n    });\n    return marker;\n  }\n\n}\n"]}