{"version":3,"file":"agm-direction.umd.js","sources":["../../../packages/core/services/maps-api-loader/maps-api-loader.ts","../../../packages/core/services/google-maps-api-wrapper.ts","../../../packages/core/utils/browser-globals.ts","../../../packages/core/services/maps-api-loader/lazy-maps-api-loader.ts","../package/src/directive/agm-direction.directive.ts","../package/src/modules/agm-direction.module.ts"],"sourcesContent":[{"errno":-2,"code":"ENOENT","syscall":"open","path":"/Users/mac/Desktop/Robby/packages/core/services/maps-api-loader/maps-api-loader.ts"},{"errno":-2,"code":"ENOENT","syscall":"open","path":"/Users/mac/Desktop/Robby/packages/core/services/google-maps-api-wrapper.ts"},{"errno":-2,"code":"ENOENT","syscall":"open","path":"/Users/mac/Desktop/Robby/packages/core/utils/browser-globals.ts"},{"errno":-2,"code":"ENOENT","syscall":"open","path":"/Users/mac/Desktop/Robby/packages/core/services/maps-api-loader/lazy-maps-api-loader.ts"},"import { Directive, Input, Output, OnChanges, OnInit, EventEmitter } from '@angular/core';\nimport { GoogleMapsAPIWrapper } from '@agm/core';\nimport { InfoWindow, Marker, GoogleMap } from '@agm/core/services/google-maps-types';\n\ndeclare var google: any;\n@Directive({\n  selector: 'agm-direction',\n})\nexport class AgmDirection implements OnChanges, OnInit {\n\n  /**\n   * LatLng | String | google.maps.Place\n   */\n  @Input() origin: any;\n\n  /**\n   * LatLng | String | google.maps.Place\n   */\n  @Input() destination: any;\n\n  @Input() travelMode: String = 'DRIVING';\n  @Input() transitOptions: any = undefined;\n  @Input() drivingOptions: any = undefined;\n  @Input() waypoints: any = [];\n  @Input() optimizeWaypoints: Boolean = true;\n  @Input() provideRouteAlternatives: Boolean = false;\n  @Input() avoidHighways: Boolean = false;\n  @Input() avoidTolls: Boolean = false;\n  @Input() renderOptions: any;\n  @Input() visible: Boolean = true;\n  @Input() panel: object | undefined;\n  @Input() markerOptions: { origin: any, destination: any, waypoints: any };\n  @Input() infoWindow: InfoWindow;\n\n  // Render exist directoin\n  @Input() renderRoute: any;\n\n  // Direction change event handler\n  @Output() onChange: EventEmitter<any> = new EventEmitter<any>();\n\n  // Direction response for the new request\n  @Output() onResponse: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() sendInfoWindow: EventEmitter<InfoWindow> = new EventEmitter<InfoWindow>();\n\n  public directionsService: any = undefined;\n  public directionsDisplay: any = undefined;\n\n  // Use for custom marker\n  private originMarker: any;\n  private destinationMarker: any;\n  private waypointsMarker: any = [];\n\n  // Use for visible flag\n  private isFirstChange: Boolean = true;\n\n  constructor(\n    private gmapsApi: GoogleMapsAPIWrapper,\n  ) { }\n\n  ngOnInit() {\n    if (this.visible === true) {\n      this.directionDraw();\n    }\n  }\n\n  ngOnChanges(obj: any) {\n    /**\n     * When visible is false then remove the direction layer\n     */\n    if (!this.visible) {\n      try {\n        if (typeof this.originMarker !== 'undefined') {\n          this.originMarker.setMap(null);\n          this.destinationMarker.setMap(null);\n          this.waypointsMarker.forEach((w: any) => w.setMap(null));\n        }\n        this.directionsDisplay.setPanel(null);\n        this.directionsDisplay.setMap(null);\n        this.directionsDisplay = undefined;\n      } catch (e) { }\n    } else {\n      if (this.isFirstChange) {\n        /**\n         * When visible is false at the first time\n         */\n        if (typeof this.directionsDisplay === 'undefined') {\n          this.directionDraw();\n        }\n        this.isFirstChange = false;\n        return;\n      }\n\n      /**\n       * When renderOptions are not first change then reset the display\n       */\n      if (typeof obj.renderOptions !== 'undefined') {\n        if (obj.renderOptions.firstChange === false) {\n          if (typeof this.originMarker !== 'undefined') {\n            this.originMarker.setMap(null);\n            this.destinationMarker.setMap(null);\n            this.waypointsMarker.forEach((w: any) => w.setMap(null));\n          }\n          this.directionsDisplay.setPanel(null);\n          this.directionsDisplay.setMap(null);\n          this.directionsDisplay = undefined;\n        }\n      }\n      this.directionDraw();\n    }\n\n  }\n\n  /**\n   * This event is fired when the user creating or updating this direction\n   */\n  private directionDraw() {\n\n    this.gmapsApi.getNativeMap().then((map: GoogleMap) => {\n\n      if (typeof this.directionsDisplay === 'undefined') {\n        this.directionsDisplay = new google.maps.DirectionsRenderer(this.renderOptions);\n        this.directionsDisplay.setMap(map);\n        this.directionsDisplay.addListener('directions_changed', () => {\n          this.onChange.emit(this.directionsDisplay.getDirections());\n        });\n      }\n\n      if (typeof this.directionsService === 'undefined') {\n        this.directionsService = new google.maps.DirectionsService;\n      }\n\n      if (typeof this.panel === 'undefined') {\n        this.directionsDisplay.setPanel(null);\n      } else {\n        this.directionsDisplay.setPanel(this.panel);\n      }\n\n      // Render exist direction\n      if (typeof this.renderRoute === 'object' && this.renderRoute !== null) {\n        this.directionsDisplay.setDirections(this.renderRoute);\n        this.renderRoute = null; // or set undefined, ''\n      } else {\n\n        // Request new direction\n        this.directionsService.route({\n          origin: this.origin,\n          destination: this.destination,\n          travelMode: this.travelMode,\n          transitOptions: this.transitOptions,\n          drivingOptions: this.drivingOptions,\n          waypoints: this.waypoints,\n          optimizeWaypoints: this.optimizeWaypoints,\n          provideRouteAlternatives: this.provideRouteAlternatives,\n          avoidHighways: this.avoidHighways,\n          avoidTolls: this.avoidTolls,\n        }, (response: any, status: any) => {\n\n          this.onResponse.emit(response);\n\n          if (status === 'OK') {\n            this.directionsDisplay.setDirections(response);\n\n            /**\n             * Emit The DirectionsResult Object\n             * https://developers.google.com/maps/documentation/javascript/directions?hl=en#DirectionsResults\n             */\n\n            // Custom Markers\n            if (typeof this.markerOptions !== 'undefined') {\n\n              // Remove origin markers\n              try {\n                if (typeof this.originMarker !== 'undefined') {\n                  google.maps.event.clearListeners(this.originMarker, 'click');\n                  this.originMarker.setMap(null);\n                }\n                if (typeof this.destinationMarker !== 'undefined') {\n                  google.maps.event.clearListeners(this.destinationMarker, 'click');\n                  this.destinationMarker.setMap(null);\n                }\n                this.waypointsMarker.forEach((w: any) => {\n                  if (typeof w !== 'undefined') {\n                    google.maps.event.clearListeners(w, 'click');\n                    w.setMap(null);\n                  }\n                });\n\n              } catch (err) {\n                console.error('Can not reset custom marker.', err);\n              }\n\n              // Set custom markers\n              const _route = response.routes[0].legs[0];\n              try {\n                // Origin Marker\n                if (typeof this.markerOptions.origin !== 'undefined') {\n                  this.markerOptions.origin.map = map;\n                  this.markerOptions.origin.position = _route.start_location;\n                  this.originMarker = this.setMarker(\n                    map,\n                    this.originMarker,\n                    this.markerOptions.origin,\n                    _route.start_address,\n                  );\n                }\n\n                // Destination Marker\n                if (typeof this.markerOptions.destination !== 'undefined') {\n                  this.markerOptions.destination.map = map;\n                  this.markerOptions.destination.position = _route.end_location;\n                  this.destinationMarker = this.setMarker(\n                    map,\n                    this.destinationMarker,\n                    this.markerOptions.destination,\n                    _route.end_address,\n                  );\n                }\n\n                // Waypoints Marker\n                if (typeof this.markerOptions.waypoints !== 'undefined') {\n\n                  this.waypoints.forEach((waypoint: any, index: number) => {\n\n                    // If waypoints are not array then set all the same\n                    if (!Array.isArray(this.markerOptions.waypoints)) {\n                      this.markerOptions.waypoints.map = map;\n                      this.markerOptions.waypoints.position = _route.via_waypoints[index];\n                      this.waypointsMarker.push(this.setMarker(\n                        map,\n                        waypoint,\n                        this.markerOptions.waypoints,\n                        _route.via_waypoints[index],\n                      ));\n                    } else {\n                      this.markerOptions.waypoints[index].map = map;\n                      this.markerOptions.waypoints[index].position = _route.via_waypoints[index];\n                      this.waypointsMarker.push(this.setMarker(\n                        map,\n                        waypoint,\n                        this.markerOptions.waypoints[index],\n                        _route.via_waypoints[index],\n                      ));\n                    }\n\n                  }); // End forEach\n\n                }\n              } catch (err) {\n                console.error('MarkerOptions error.', err);\n              }\n            }\n\n          }\n\n        });\n      }\n    });\n  }\n\n  /**\n   * Custom Origin and Destination Icon\n   * @param map map\n   * @param marker marker\n   * @param markerOpts properties\n   * @param content marker's infowindow content\n   * @returns new marker\n   * @memberof AgmDirection\n   */\n  private setMarker(map: GoogleMap, marker: any, markerOpts: any, content: string) {\n    if (typeof this.infoWindow === 'undefined') {\n      this.infoWindow = new google.maps.InfoWindow({});\n      this.sendInfoWindow.emit(this.infoWindow);\n    }\n    marker = new google.maps.Marker(markerOpts);\n    marker.addListener('click', () => {\n      const infowindoContent: string = typeof markerOpts.infoWindow === 'undefined' ? content : markerOpts.infoWindow;\n      this.infoWindow.setContent(infowindoContent);\n      this.infoWindow.open(map, marker);\n    });\n    return marker;\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { AgmDirection } from '../directive/agm-direction.directive';\n\nexport * from '../directive/agm-direction.directive';\n\n@NgModule({\n    imports: [],\n    declarations: [\n        AgmDirection,\n    ],\n    exports: [\n        AgmDirection,\n    ]\n})\nexport class AgmDirectionModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: AgmDirectionModule,\n        };\n    }\n}\n"],"names":["Injectable","Observable","NgZone","InjectionToken","Optional","Inject","EventEmitter","Directive","Input","Output","NgModule"],"mappings":"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"}